{"version":3,"sources":["../../../../../../apps/frontend/src/components/common/site/theme/providers/theme-provider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport type { Theme } from '@/stores/auth-store';\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n  attribute?: string;\n  enableSystem?: boolean;\n  disableTransitionOnChange?: boolean;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst initialState: ThemeProviderState = {\n  theme: 'system',\n  setTheme: () => null,\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = 'system',\n  storageKey = 'ui-theme',\n  enableSystem = true,\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    // Check if we're on the client side\n    if (typeof window === 'undefined') {\n      return defaultTheme;\n    }\n\n    try {\n      const stored = localStorage.getItem(storageKey) as Theme;\n      return stored || defaultTheme;\n    } catch (error) {\n      console.warn('Failed to read theme from localStorage:', error);\n      return defaultTheme;\n    }\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n\n    root.classList.remove('light', 'dark');\n\n    if (theme === 'system' && enableSystem) {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)')\n        .matches\n        ? 'dark'\n        : 'light';\n\n      root.classList.add(systemTheme);\n      return;\n    }\n\n    root.classList.add(theme);\n  }, [theme, enableSystem]);\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      // Only access localStorage on the client side\n      if (typeof window !== 'undefined') {\n        try {\n          localStorage.setItem(storageKey, theme);\n        } catch (error) {\n          console.warn('Failed to save theme to localStorage:', error);\n        }\n      }\n      setTheme(theme);\n    },\n  };\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useThemeProvider = () => {\n  const context = useContext(ThemeProviderContext);\n\n  if (context === undefined)\n    throw new Error('useThemeProvider must be used within a ThemeProvider');\n\n  return context;\n};\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAsBA,IAAM,EAAuB,CAAA,EAAA,EAAA,aAAA,AAAa,EALD,AAKsB,CAJ7D,MAAO,SACP,SAAU,IAAM,IAClB,GAIO,SAAS,EAAc,UAC5B,CAAQ,cACR,EAAe,QAAQ,YACvB,EAAa,UAAU,cACvB,GAAe,CAAI,CACnB,GAAG,EACgB,EACnB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,IAG/B,SAYX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAO,OAAO,QAAQ,CAAC,eAAe,CAI5C,GAFA,EAAK,SAAS,CAAC,MAAM,CAAC,QAAS,QAEjB,WAAV,GAAsB,EAAc,CACtC,IAAM,EAAc,OAAO,UAAU,CAAC,gCACnC,OAAO,CACN,OACA,QAEJ,EAAK,SAAS,CAAC,GAAG,CAAC,GACnB,MACF,CAEA,EAAK,SAAS,CAAC,GAAG,CAAC,EACrB,EAAG,CAAC,EAAO,EAAa,EAkBtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAqB,QAAQ,CAAA,CAAE,GAAG,CAAK,CAAE,MAhB9B,CACZ,AAeiD,QAdjD,SAAU,AAAC,IAST,EAAS,EACX,CACF,WAIK,GAGP,iDAEgC,KAC9B,IAAM,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAE3B,QAAgB,IAAZ,EACF,MAAM,AAAI,MAAM,wDAElB,OAAO,CACT"}