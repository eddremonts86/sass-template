{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/edd/Projects/next-js-template/apps/frontend/src/components/common/site/theme/providers/theme-provider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport type { Theme } from '@/stores/auth-store';\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n  attribute?: string;\n  enableSystem?: boolean;\n  disableTransitionOnChange?: boolean;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst initialState: ThemeProviderState = {\n  theme: 'system',\n  setTheme: () => null,\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = 'system',\n  storageKey = 'ui-theme',\n  enableSystem = true,\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    // Check if we're on the client side\n    if (typeof window === 'undefined') {\n      return defaultTheme;\n    }\n\n    try {\n      const stored = localStorage.getItem(storageKey) as Theme;\n      return stored || defaultTheme;\n    } catch (error) {\n      console.warn('Failed to read theme from localStorage:', error);\n      return defaultTheme;\n    }\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n\n    root.classList.remove('light', 'dark');\n\n    if (theme === 'system' && enableSystem) {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)')\n        .matches\n        ? 'dark'\n        : 'light';\n\n      root.classList.add(systemTheme);\n      return;\n    }\n\n    root.classList.add(theme);\n  }, [theme, enableSystem]);\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      // Only access localStorage on the client side\n      if (typeof window !== 'undefined') {\n        try {\n          localStorage.setItem(storageKey, theme);\n        } catch (error) {\n          console.warn('Failed to save theme to localStorage:', error);\n        }\n      }\n      setTheme(theme);\n    },\n  };\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useThemeProvider = () => {\n  const context = useContext(ThemeProviderContext);\n\n  if (context === undefined)\n    throw new Error('useThemeProvider must be used within a ThemeProvider');\n\n  return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAmBA,MAAM,eAAmC;IACvC,OAAO;IACP,UAAU,IAAM;AAClB;AAEA,MAAM,qCAAuB,IAAA,6XAAa,EAAqB;AAExD,SAAS,cAAc,KAMT;QANS,EAC5B,QAAQ,EACR,eAAe,QAAQ,EACvB,aAAa,UAAU,EACvB,eAAe,IAAI,EACnB,GAAG,OACgB,GANS;;IAO5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wXAAQ;kCAAQ;YACxC,oCAAoC;YACpC;;YAIA,IAAI;gBACF,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,OAAO,UAAU;YACnB,EAAE,OAAO,OAAO;gBACd,QAAQ,IAAI,CAAC,2CAA2C;gBACxD,OAAO;YACT;QACF;;IAEA,IAAA,yXAAS;mCAAC;YACR,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;YAE5C,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;YAE/B,IAAI,UAAU,YAAY,cAAc;gBACtC,MAAM,cAAc,OAAO,UAAU,CAAC,gCACnC,OAAO,GACN,SACA;gBAEJ,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB;YACF;YAEA,KAAK,SAAS,CAAC,GAAG,CAAC;QACrB;kCAAG;QAAC;QAAO;KAAa;IAExB,MAAM,QAAQ;QACZ;QACA,UAAU,CAAC;YACT,8CAA8C;YAC9C,wCAAmC;gBACjC,IAAI;oBACF,aAAa,OAAO,CAAC,YAAY;gBACnC,EAAE,OAAO,OAAO;oBACd,QAAQ,IAAI,CAAC,yCAAyC;gBACxD;YACF;YACA,SAAS;QACX;IACF;IAEA,qBACE,4YAAC,qBAAqB,QAAQ;QAAE,GAAG,KAAK;QAAE,OAAO;kBAC9C;;;;;;AAGP;GA5DgB;KAAA;AA8DT,MAAM,mBAAmB;;IAC9B,MAAM,UAAU,IAAA,0XAAU,EAAC;IAE3B,IAAI,YAAY,WACd,MAAM,IAAI,MAAM;IAElB,OAAO;AACT;IAPa","debugId":null}}]
}